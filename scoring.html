<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cricket Scoring App</title>
  <style>
    /* Add your existing styles here */

    /* New styles for delivery tracker */
    .delivery-tracker {
      display: flex;
      gap: 5px;
      margin-top: 10px;
    }
    .delivery-circle {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
    }
    .delivery-circle.blue {
      background: #1E90FF; /* Blue for 4 runs */
    }
    .delivery-circle.red {
      background: #FF4500; /* Red for 6 runs */
    }
    .delivery-circle.grey {
      background: #808080; /* Grey for other runs */
    }
    .batter-on-strike::before {
      content: "â˜… "; /* Star for batter on strike */
      color: green;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <!-- Add your existing HTML here -->

  <!-- Updated Scoring Interface -->
  <div id="scoring-interface" class="screen">
    <h1>Scoring Interface</h1>
    <div class="match-summary">
      <strong>Match Summary:</strong>
      <div id="summary-team1"></div>
      <div id="summary-team2"></div>
      <div>Overs: <span id="summary-overs"></span></div>
    </div>
    <div class="score-display">
      <strong id="batting-team-name"></strong>: <span id="team-score" class="team-score">0/0</span> | 
      <strong>Overs:</strong> <span id="overs-display" class="overs-display">0.0</span> | 
      <strong>Run Rate:</strong> <span id="run-rate">0.00</span>
    </div>
    <div id="target-display" style="display: none;">
      <strong>Target:</strong> <span id="target-runs"></span> | 
      <strong>Req. Run Rate:</strong> <span id="required-run-rate">0.00</span>
    </div>
    <div class="batter-display">
      <span id="batter1-display">0 (0)</span>
      <span id="batter2-display">0 (0)</span>
    </div>
    <div class="bowler-display">
      <strong>Bowler:</strong> <span id="bowler-display">0.0 (0-0)</span>
      <div class="delivery-tracker" id="delivery-tracker"></div>
    </div>
    <!-- Add your existing buttons and inputs here -->
  </div>

  <!-- Add your existing popups here -->

  <script>
    // Add your existing JavaScript here

    // New function to update the delivery tracker
    function updateDeliveryTracker() {
      const deliveryTracker = document.getElementById("delivery-tracker");
      deliveryTracker.innerHTML = matchData.currentOver.map((ball) => {
        let className = "grey";
        let text = ball;
        if (ball === 4) className = "blue";
        if (ball === 6) className = "red";
        if (ball.includes("wide")) text = "wd";
        if (ball.includes("no-ball")) text = "NB";
        return `<div class="delivery-circle ${className}">${text}</div>`;
      }).join("");
    }

    // New function to update the batting team name and run rate
    function updateBattingTeamDisplay() {
      const battingTeamName = document.getElementById("batting-team-name");
      const runRate = document.getElementById("run-rate");
      const overs = matchData.currentInnings.team1.balls / 6;
      const runs = matchData.currentInnings.team1.runs;
      const currentRunRate = (runs / overs).toFixed(2);
      battingTeamName.textContent = matchData.team1.name;
      runRate.textContent = currentRunRate;
    }

    // New function to update target and required run rate
    function updateTargetDisplay() {
      const targetDisplay = document.getElementById("target-display");
      const targetRuns = document.getElementById("target-runs");
      const requiredRunRate = document.getElementById("required-run-rate");
      if (matchData.currentInnings.team2.runs > 0) {
        const target = matchData.currentInnings.team1.runs + 1;
        const remainingRuns = target - matchData.currentInnings.team2.runs;
        const remainingBalls = matchData.overs * 6 - matchData.currentInnings.team2.balls;
        const requiredRR = (remainingRuns / (remainingBalls / 6)).toFixed(2);
        targetRuns.textContent = target;
        requiredRunRate.textContent = requiredRR;
        targetDisplay.style.display = "block";
      } else {
        targetDisplay.style.display = "none";
      }
    }

    // Update the updateDisplay function
    function updateDisplay() {
      updateDeliveryTracker();
      updateBattingTeamDisplay();
      updateTargetDisplay();
      // Add your existing display updates here
    }

    // Fix the "Change Bowler" button
    function changeBowler() {
      showNewBowlerPopup();
    }
  </script>
</body>
</html>
